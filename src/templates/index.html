{% extends "base.html" %}

{% block title %}Последние статьи{% endblock %}

{% block content %}
{% load thumbnail %}
  {% for article in page_obj %}
  <div class="card mb-3"> <!-- Контейнер статьи -->
    <h3 class="card-header">{{ article.title }}</h3>
    <div class="card-body"> <!-- Контейнер тегов -->
      {% if article.category %}
        <h6><a href="{% url 'articles:articles_by_category' article.category.slug %}" class="card-link">Раздел: {{ article.category }}</a></h6>
      {% endif %}
      {% for tag in article.tags.all %}
        <a href="{% url 'articles:articles_by_tag' tag.slug %}"><span class="badge rounded-pill" style="background-color:{{ tag.background_color }}; color:{{ tag.text_color }}">{{ tag }}</span></a>
      {% endfor %}
    </div> <!-- Контейнер тегов -->
    {% thumbnail article.image "900x300" crop="center" upscale=True as im %}
      <img class="card-img" src="{{ im.url }}">
    {% endthumbnail %}
    <div class="card-body">
      {{ article.text|truncatechars:500|safe }}
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><a href="{% url 'articles:article' article.id %}" class="card-link">Читать</a>
      {% if user.is_superuser %}
        <a href="{% url 'articles:article_edit' article.id %}">
            Редактировать
        </a>
      {% endif %}
      </li>
    </ul>
    <div class="card-footer text-muted">
      <small>Публикация: {{ article.created }}</small>,
      <small>последнее обновление: {{ article.updated }}</small>
    </div>
  </div> <!-- Контейнер статьи -->
  {% if not forloop.last %}<br>{% endif %}
  {% endfor %}
  {% include 'includes/paginator.html' %}
{% endblock %}


















































